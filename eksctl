### Install kubectl

**kubectl:** is the Kubernetes command-line tool used to interact with the cluster. You can install it following [the instructions here](https://kubernetes.io/docs/tasks/tools/#kubectl).

**Note:** You can use ``choco`` on windows or ``brew`` on Mac

**1. On Windows with choco**
```bash
choco install kubernetes-cli
```

After successful installation, run the following command to verify the version installed:
```bash
kubectl version --client
```

**2. On Mac with Homebrew**

```bash
brew install kubectl
```
or
```bash
brew install kubernetes-cli
```
After successful installation, run the following command to verify the version installed:
```bash
kubectl version --client
```

### Install eksctl

**eksctl** is a simple CLI tool for creating and managing clusters on EKS.
#### Install eksctl on Windows
Open Powershell as administrator and install eksctl using choco with the command:
```bash
choco install eksctl
```

#### Install eksctl on MAC
You can use Homebrew to install eksctl with the command:
 ```bash
brew tap weaveworks/tap
brew install weaveworks/tap/eksctl
```
### Create the cluster in EKS

Use the following command to create a cluster:
```bash
eksctl create cluster --name my-cluster --region us-east-1 --nodegroup-name my-nodes --node-type t3.small --nodes 2 --nodes-min 1 --nodes-max 2
```
**Note:** This command may complete in 10 to 15 minutes depending on your computer and network connection. Be patient and wait till the end of the process

### Update the Kubeconfig

Verify that you can access the cluster. You should see nodes READY.
```bash
kubectl get nodes
```

Note: If the previous throws and error, then update the kubeconfig with the command and retry:

```bash
aws eks update-kubeconfig --region us-east-1 --name my-cluster
```

### Basic commands
| **Command**                                      | **Description**                                                                 |
|--------------------------------------------------|---------------------------------------------------------------------------------|
| `kubectl cluster-info dump`                      | Get details about the cluster (API server, components, etc.).                   |
| `kubectl config view`                            | view the Kubeconfig file                   |
| `kubectl get nodes`                              | List all nodes in the Kubernetes cluster.                                       |
| `kubectl get nodes -o wide`                      | Show more details on node                                  |
| `kubectl get pods`                               | List all pods in the default namespace.                                        |
| `kubectl get pods -o wide`                       | Show more details (e.g., pod IP, node, etc.).                                   |
| `kubectl get deployments`                        | List all deployments in the default namespace.                                  |
| `kubectl get services`                           | List all services in the defaut namespace                                            |
| `kubectl proxy`                                  | Access the Kubernetes cluster dashboard (if set up).                            |

## Delete the EKS Cluster

When done with practice, always delete resources to avoid further charges in the cloud. Run this command only when you are done practicing 
```bash
eksctl delete cluster --name my-cluster --region us-east-1
```
After deleting the cluster, you can verify in Cloudformation that all the stacks related to the cluster creation were successfully deleted.

